---
title: "PEA_A2_Praticando"
author: "Nicolas"
date: "2024-02-25"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Exercício 1

Considere a base.

```{r}
# df = read.csv('https://meusite.mackenzie.br/rogerio/TIC/Life_Expectancy_Data.csv') - Seguinte erro:Error in file(file, "rt") : cannot open the connection to 'https://meusite.mackenzie.br/rogerio/TIC/Life_Expectancy_Data.csv'
df <- read.csv('Life_Expectancy_Data.csv')
df <- na.omit(df)
head(df)
```

1. Explore os dados. Quantos registros, quantidade de atributos, período etc.

```{r}
n_registros <- nrow(df)
n_atributos <- ncol(df)
periodo <- range(df$Year)

cat("Número de registros: ", n_registros, "\n")
cat("Número de atributos: ", n_atributos, "\n")
cat("Período: ", periodo[1], "a", periodo[2], "\n\n")
```

2. Selecione somente os dados de 2014 e empregue eles nos exercícios a seguir. Verifique a quantidade de registros resultante.

```{r}
df_2014 <- df[df$Year == 2014, ]
n_registros_2014 <- nrow(df_2014)

cat("Números de registros em 2014:", n_registros_2014, "\n\n")
```

3. Qual a média de Expectativa de Vida para os países em desenvolvimento e desenvolvidos em 2014?

```{r}
media_expectativa_desenvolvidos <- mean(df_2014$Life.expectancy[df_2014$Status == "Developed"])
media_expectativa_desenvolvimento <- mean(df_2014$Life.expectancy[df_2014$Status == "Developing"])

cat("Média de Expectativa de Vida para países desenvolvidos em 2014: ", media_expectativa_desenvolvidos, "\n")
cat("Média de Expectativa de Vida para países em desenvolvimento em 2014: ", media_expectativa_desenvolvimento, "\n")
```

4. Qual a média, mediana e quartis de BMI e Expectativa de Vida para os países desenvolvidos em 2014?

```{r}
estatisticas_desenvolvidos <- data.frame(
  media_BMI = mean(df_2014$BMI),
  mediana_BMI = median(df_2014$BMI),
  quartil1_BMI = quantile(df_2014$BMI, 0.25),
  quartil3_BMI = quantile(df_2014$BMI, 0.75),
  media_expectativa = mean(df_2014$Life.expectancy),
  mediana_expectativa = median(df_2014$Life.expectancy),
  quartil1_expectativa = quantile(df_2014$Life.expectancy, 0.25),
  quartil3_expectativa = quantile(df_2014$Life.expectancy, 0.75)
)

print(estatisticas_desenvolvidos)
cat("\n")
```

5. Qual a média e desvio padrão para os valores de BMI e Expectativa de Vida para os países em desenvolvimento e desenvolvidos em 2014?

```{r}
media_desenvolvidos <- mean(df_2014$BMI[df_2014$Status == "Developed"])
desvio_desenvolvidos <- sd(df_2014$BMI[df_2014$Status == "Developed"])
media_expectativa_desenvolvidos <- mean(df_2014$Life.expectancy[df_2014$Status == "Developed"])
desvio_expectativa_desenvolvidos <- sd(df_2014$Life.expectancy[df_2014$Status == "Developed"])

media_desenvolvimento <- mean(df_2014$BMI[df_2014$Status == "Developing"])
desvio_desenvolvimento <- sd(df_2014$BMI[df_2014$Status == "Developing"])
media_expectativa_desenvolvimento <- mean(df_2014$Life.expectancy[df_2014$Status == "Developing"])
desvio_expectativa_desenvolvimento <- sd(df_2014$Life.expectancy[df_2014$Status == "Developing"])

estatisticas_todos <- data.frame(
  media_BMI_desenvolvidos = media_desenvolvidos,
  desvio_BMI_desenvolvidos = desvio_desenvolvidos,
  media_expectativa_desenvolvidos = media_expectativa_desenvolvidos,
  desvio_expectativa_desenvolvidos = desvio_expectativa_desenvolvidos,
  media_BMI_desenvolvimento = media_desenvolvimento,
  desvio_BMI_desenvolvimento = desvio_desenvolvimento,
  media_expectativa_desenvolvimento = media_expectativa_desenvolvimento,
  desvio_expectativa_desenvolvimento = desvio_expectativa_desenvolvimento
)

print(estatisticas_todos)
```

6. Existe correlação significativa entre BMI e Expectativa de Vida para os desenvolvidos em 2014?

```{r}
correlacao_desenvolvidos <- cor.test(df_2014$BMI[df_2014$Status == "Developed"], df_2014$Life.expectancy[df_2014$Status == "Developed"])
print(correlacao_desenvolvidos)
cat("\n")
```

7. E para países em desenvolvimento, existe correlação significativa entre BMI e Expectativa de Vida em 2014?

```{r}
correlacao_desenvolvimento <- cor.test(df_2014$BMI[df_2014$Status == "Developing"], df_2014$Life.expectancy[df_2014$Status == "Developing"])
print(correlacao_desenvolvimento)
cat("\n")
```

8. Leia os dados novamente com todos os anos. Existem _outliers_ de BMI e Expectativa de Vida no conjunto de todos os países? Se sim, quantos dados são outliers? (empregue o critério dos interquartis)

DICA: empregue o comando `df = na.omit(df)` para eliminar valores ausentes nos dados como fizemos no início do exercício.

```{r}
outliers_BMI <- df$BMI < quantile(df$BMI, 0.25) - 1.5 * IQR(df$BMI) | df$BMI > quantile(df$BMI, 0.75) + 1.5 * IQR(df$BMI)
outliers_expectativa <- df$Life.expectancy < quantile(df$Life.expectancy, 0.25) - 1.5 * IQR(df$Life.expectancy) | df$Life.expectancy > quantile(df$Life.expectancy, 0.75) + 1.5 * IQR(df$Life.expectancy)

n_outliers_BMI <- sum(outliers_BMI)
n_outliers_expectativa <- sum(outliers_expectativa)
cat("Número de outliers de BMI:", n_outliers_BMI, "\n")
cat("Número de outliers de Expectativa de Vida:", n_outliers_expectativa, "\n\n")
```

9. Qual a média de Expectativa de Vida com e sem _outliers_ (lembre-se de considerar aqui a base completa)?

```{r}
media_com_outliers <- mean(df$Life.expectancy)
media_sem_outliers <- mean(df$Life.expectancy[!outliers_expectativa])

cat("Média de Expectativa de Vida com outliers:", media_com_outliers, "\n")
cat("Média de Expectativa de Vida sem outliers:", media_sem_outliers, "\n")
```

### Exercício 2

```{r}
library(MASS) # Carregando a biblioteca MASS

painters <- na.omit(painters) # Carregando a base de dados painters e removendo linhas com valores ausentes

head(painters) # Visualizando as primeiras linhas da base de dados
```

1. Quantos tipos de escolas de pintores existem?

```{r}
# Utilizando a função unique() para identificar os diferentes tipos de escolas
tipos_escolas <- unique(painters$School)
num_tipos_escolas <- length(tipos_escolas)

# Exibindo o resultado
print(num_tipos_escolas)
```

2. Qual a nota das escolas de pintores?

```{r}
frequencia_escolas <- table(painters$School) # Utilizando a função table() para contar a frequência de cada escola

nota_escola <- names(frequencia_escolas)[which.max(frequencia_escolas)] # Encontrando a moda (escola mais frequente)

print(nota_escola)

```

3. Quantos pintores estão acima da média em composição?

```{r}
media_composicao <- mean(painters$Compos) # Calculando a média da pontuação de Composição

pintores_acima_da_media <- sum(painters$Compos > media_composicao) # Contando o número de pintores acima da média em Composição

print(pintores_acima_da_media)
```

4. Qual o pintor ou pintores com maior pontuação considerando todos os critérios? Não há muita surpresa aqui não?

DICA: crie uma nota com a soma de todas as pontuações dos pintores.

```{r}
painters$Nota <- rowSums(painters[, c("Composition", "Colour", "Drawing", "Expression")]) # Removendo a coluna "School" do cálculo da nota

pintor_maior_pontuacao <- painters[which.max(painters$Nota), ] # Encontrando o(s) pintor(es) com maior pontuação

print(pintor_maior_pontuacao)
```

5. Explore a mediana e média através das notas de Composição e Colour dos pintores.

```{r}
# Calculando a mediana e média das notas de Composição e Colour
mediana_composicao <- median(painters$Composition)
media_composicao <- mean(painters$Composition)

mediana_colour <- median(painters$Colour)
media_colour <- mean(painters$Colour)

# Exibindo os resultados
print(paste("Mediana Composição:", mediana_composicao))
print(paste("Média Composição:", media_composicao))
print(paste("Mediana Colour:", mediana_colour))
print(paste("Média Colour:", media_colour))

```

### Exercício 3

----

1. A mediana e desvio padrão são estatística que ajudam a compreender:

- [x]   A centralidade e dispersão dos dados
- [ ]   A centralidade dos dados
- [ ]   A dispersão dos dados
- [ ]   A posição dos dados
- [ ]   Nenhuma das alternativas

Explicação:

- A mediana indica o valor central do conjunto de dados, dividindo-o em dois grupos com o mesmo número de elementos.

- O desvio padrão mede a dispersão dos dados em torno da média, indicando a variabilidade das observações.

----

2. Um conjunto de dados com um desvio padrão alto:

- [ ]   Está mais concentrado
- [x]   É mais disperso
- [ ]   Apresenta média e medianas próximas
- [ ]   Apresenta média e medianas distantes
- [ ]   Nenhuma das alternativas

Explicação:

- Um alto desvio padrão indica que os dados estão mais dispersos em torno da média.

- Isso significa que há uma maior variabilidade entre os valores, com alguns pontos se distanciando significativamente da média.

----

3. Uma correlação, entre duas variáveis, próxima de zero indica que:

- [x]   As variáveis são independentes
- [ ]   As variáveis não tem relação
- [ ]   As variáveis não tem relação linear
- [ ]   As variáveis apresentam valores muito iguais
- [ ]   Nenhuma das alternativas

Explicação:

- Uma correlação próxima de zero indica que não há relação linear significativa entre as variáveis.

- Isso significa que a mudança em uma variável não está associada a uma mudança previsível na outra.

----

4. Outliers nos dados ser encontrados por:

- [ ]   Erros de medida

- [ ]   Erro na entrada dos dados

- [ ]   Ruído nos dados (interferências)

- [ ]   Valores legítimos mas que de fato se destacam do padrão dos dados

- [x]   Todas as alternativas

Explicação:

- Outliers são valores que se distanciam significativamente do restante do conjunto de dados.

- Eles podem ser causados por erros de medida, entrada de dados, ruído ou valores legítimos que se distinguem do padrão.

----

5. Sobre o desvio padrão:

i. Diferentemente da variância encontra-se na mesma unidade que os dados
ii. É igual ao quadrado da variância
iii. É uma medida de dispersão dos dados São corretas:

- [ ]  Somente i
- [ ]  Somente i, ii
- [ ]  Somente i, iii
- [ ]  Somente ii, iii
- [x]  Todas

Explicação:

- O desvio padrão é uma medida de dispersão dos dados, indicando a variabilidade das observações em torno da média.

- Ele é encontrado na mesma unidade que os dados, facilitando a interpretação da sua magnitude.

- O desvio padrão também é igual à raiz quadrada da variância, que é outra medida de dispersão.